@page "/"
@model Filer.Pages.WorkDirModel
@{
    Layout = "_Layout";
}

@section title {
    <title>@Model.Title - Filer</title>
}

@section header {
    <script>
        var initialData = @Html.Raw(Model.Data);
    </script>

    <script>
        var initialEncodeData = @Html.Raw(Model.EncodeData);
    </script>
}

@section theme {
    <script>checkTheme()</script>
}

<div id="app" class="layout">

@await Html.PartialAsync("_HeaderPartial",
    new Header(HeaderMode.Theme, "workDir"))

    <div class="container">
        <div class="main file-main">
            <div class="main-inner">

                @await Html.PartialAsync("_NavbarInfoPartial")

                @* <div class="board fw">
                    <div class="board-title">{{local.workDir}}</div>
                </div> *@
                <div class="board file-navbar sticky">
                    <div class="start mw-1x">
                        <div class="file-navbar-btn">
                            <template v-if="!hasSearch">
                                <a href="javascript:void(0)">
                                    <i class="fa-solid fa-house fa-fw fa-bounce"></i>
                                    @* <i class="fa-solid fa-house-chimney fa-fw fa-bounce"></i> *@
                                </a>
                                @* <a href="javascript:void(0)" class="nav-button-icon">
                                    <svg class="svg-icon" viewBox="0 0 640 640" fill="none">
                                        <path d="M304 70.1C313.1 61.9 326.9 61.9 336 70.1L568 278.1C577.9 286.9 578.7 302.1 569.8 312C560.9 321.9 545.8 322.7 535.9 313.8L527.9 306.6L527.9 511.9C527.9 547.2 499.2 575.9 463.9 575.9L175.9 575.9C140.6 575.9 111.9 547.2 111.9 511.9L111.9 306.6L103.9 313.8C94 322.6 78.9 321.8 70 312C61.1 302.2 62 287 71.8 278.1L304 70.1zM320 120.2L160 263.7L160 512C160 520.8 167.2 528 176 528L224 528L224 424C224 384.2 256.2 352 296 352L344 352C383.8 352 416 384.2 416 424L416 528L464 528C472.8 528 480 520.8 480 512L480 263.7L320 120.3zM272 528L368 528L368 424C368 410.7 357.3 400 344 400L296 400C282.7 400 272 410.7 272 424L272 528z" fill="currentColor" />
                                    </svg>
                                    <svg class="svg-icon fa-fw fa-bounce" viewBox="0 0 512 512" fill="none">
                                        <path d="M240 6.1c9.1-8.2 22.9-8.2 32 0l232 208c9.9 8.8 10.7 24 1.8 33.9s-24 10.7-33.9 1.8l-8-7.2 0 205.3c0 35.3-28.7 64-64 64l-288 0c-35.3 0-64-28.7-64-64l0-205.3-8 7.2c-9.9 8.8-25 8-33.9-1.8s-8-25 1.8-33.9L240 6.1zm16 50.1L96 199.7 96 448c0 8.8 7.2 16 16 16l48 0 0-104c0-39.8 32.2-72 72-72l48 0c39.8 0 72 32.2 72 72l0 104 48 0c8.8 0 16-7.2 16-16l0-248.3-160-143.4zM208 464l96 0 0-104c0-13.3-10.7-24-24-24l-48 0c-13.3 0-24 10.7-24 24l0 104z" fill="currentColor" />
                                    </svg>
                                </a> *@
                            </template>
                            <template v-if="hasSearch">
                                <a href="">
                                    <i class="fa-solid fa-arrow-left fa-fw"></i>
                                </a>
                            </template>
                        </div>
                        <div class="file-navbar-title-warp mw-1x">
                            <template v-if="!hasSearch">
                                <div class="file-navbar-title">{{local.workDir}}</div>
                                <div class="file-navbar-title-over-warp">
                                    <div class="file-navbar-title-over">{{local.workDir}}</div>
                                </div>
                            </template>
                            <template v-if="hasSearch">
                                <div class="file-navbar-title">{{local.search}} : {{searchText}} ({{local.workDir}})</div>
                                <div class="file-navbar-title-over-warp">
                                    <div class="file-navbar-title-over">{{local.search}} : {{searchText}} ({{local.workDir}})</div>
                                </div>
                            </template>
                        </div>
                    </div>
                    <div></div>
                    <div class="end">
                        <div class="file-navbar-btn file-navbar-toggle show">
                            <a href="javascript:void(0)">
                                <span class="up">
                                    <i class="fa-solid fa-angle-up fa-fw"></i>
                                </span>
                                <span class="down">
                                    <i class="fa-solid fa-angle-down fa-fw"></i>
                                </span>
                            </a>
                        </div>
                        <div class="file-navbar-btn file-navbar-gotop">
                            <a href="javascript:void(0)">
                                <i class="fa-regular fa-circle-up fa-fw"></i>
                            </a>
                        </div>
                    </div>
                </div>
                
                @await Html.PartialAsync("_NavbarExpandPartial")

                <div v-if="isLoaded">
                    <div v-if="datas.length > 0">
                        <div v-for="(item, idx) in datas" :key="item.path">
                            <div v-if="viewMode=='view'" class="view-mode">
                                @await Html.PartialAsync("_FolderViewPartial")
                            </div>
                            <div v-if="viewMode=='thumbnail'">
                                @await Html.PartialAsync("_FolderThumbnailPartial")
                            </div>
                            <div v-if="viewMode=='download'">
                                @await Html.PartialAsync("_FolderDownloadPartial")
                            </div>
                        </div>
                    </div>
                    <template v-if="!hasSearch">
                        <div v-if="datas.length == 0">
                            <div class="board">
                                <div>{{local.workDirNotSet}}</div>
                            </div>
                        </div>
                    </template>
                </div>
            </div>

            @await Html.PartialAsync("_FooterPartial")

        </div>
    </div>
</div>
<div class="control">
    <a class="button gotop" href="javascript:void(0)">
        <i class="fa-solid fa-angle-up"></i>
    </a>
</div>

@section script {
    <script src="js/page/workDir.js?v=@version"></script>
}